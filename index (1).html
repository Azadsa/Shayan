<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Family Tree</title>

<style>
:root {
    --bg: linear-gradient(180deg, #f6efec, #eadfda);
    --card-bg: #fff;
    --card-shadow: 0 6px 12px rgba(0,0,0,0.12);
    --accent: #7b4f39;
    --modal-bg: rgba(0,0,0,0.62);
}

html, body {
    height: 100%;
    margin: 0;
    font-family: "Vazirmatn", "Tahoma", sans-serif;
    background: var(--bg);
    direction: rtl;
    color: #3f2b22;
}

.wrap {
    max-width: 1200px;
    margin: 20px auto 80px;
    position: relative;
    padding: 40px 20px;
}

h1 {
    text-align: center;
    color: var(--accent);
    margin: 0 0 30px;
    font-size: 34px;
}

.tree {
    position: relative;
    min-height: 520px;
}

.person {
    margin-right: 25px
    width: 120px;
    height: 140px;
    background: var(--card-bg);
    border-radius: 12px;
    box-shadow: var(--card-shadow);
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
    box-sizing: border-box;
    cursor: pointer;
    z-index: 2;
    transition: transform .12s ease, box-shadow .12s ease;
}
.person:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 22px rgba(0,0,0,0.14);
}

.p-tahr {
  margin-right: 10px;
}

.p-roqye {
  margin-left: 50px;
}



.avatar {
    width: 84px;
    height: 84px;
    border-radius: 50%;
    overflow: hidden;
    border: 4px solid #dcd0c7;
    margin-top: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
.avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.name {
    margin-top: 8px;
    font-size: 14px;
    color: #6b4b3a;
    text-align: center;
}

svg.connectors {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: visible;
    z-index: 1;
}

/* Modal */
#modal {
    display: none;
    position: fixed;
    inset: 0;
    background: var(--modal-bg);
    z-index: 50;
    align-items: center;
    justify-content: center;
    padding: 20px;
}
#modal.show {
    display: flex;
}

#modal-card {
    background: #fff;
    border-radius: 14px;
    width: min(760px, 96%);
    max-width: 760px;
    box-shadow: 0 18px 50px rgba(0,0,0,0.45);
    overflow: hidden;
    transform: translateY(12px) scale(.98);
    opacity: 0;
    transition: transform .28s cubic-bezier(.2,.9,.3,1), opacity .22s ease;
    display: flex;
}
#modal.show #modal-card {
    transform: translateY(0) scale(1);
    opacity: 1;
}

.modal-left {
    min-width: 260px;
    max-width: 320px;
    background: linear-gradient(180deg,#f9f4f2,#fff);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 18px;
}
.modal-left img {
    width: 100%;
    height: 100%;
    max-height: 360px;
    object-fit: cover;
    border-radius: 10px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.18);
}

.modal-right {
    padding: 20px 22px;
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.modal-right h2 {
    margin: 0;
    font-size: 22px;
    color: var(--accent);
}
.modal-right p {
    margin: 6px 0 0;
    line-height: 1.6;
    color: #4a3a33;
}

.modal-actions {
    margin-top: 16px;
    display: flex;
    gap: 8px;
}
.btn {
    border: 0;
    padding: 8px 12px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
    background: #f0f0f0;
}
.btn.primary {
    background: var(--accent);
    color: #fff;
}

.modal-close {
    position: absolute;
    left: 14px;
    top: 14px;
    background: transparent;
    border: 0;
    font-size: 22px;
    cursor: pointer;
    color: #7a5a49;
}

@media(max-width:620px){
    #modal-card { flex-direction: column; }
    .modal-left { width: 100%; padding: 12px; }
    .modal-left img { max-height: 240px; }
    .modal-right { padding: 14px; }
    .modal-close { left: 10px; top: 8px; }
}
</style>
</head>

<body>

<div class="wrap">
    <h1>شجره‌نامه خانوادگی  </h1>

    <div class="tree" id="tree">
        <svg class="connectors" id="svg"></svg>

        <!-- Parents -->
        <div class="person" id="p-roqye" style="left:46%;top:20px;"><div class="avatar"><img src="roqye.png" /></div><div class="name">رقیه</div></div>
        <div class="person" id="p-tahr" style="left:56%;top:20px;"><div class="avatar"><img src="tahir.png" /></div><div class="name">طاهر</div></div>

        <!-- Children -->
        <div class="person" id="p-elham" style="left:15%;top:170px;"><div class="avatar"><img src="elham.png" /></div><div class="name">الهام</div></div>
        <div class="person" id="p-omid" style="left:30%;top:170px;"><div class="avatar"><img src="omid.jpg" /></div><div class="name">امید</div></div>
        <div class="person" id="p-tara" style="left:43%;top:170px;"><div class="avatar"><img src="tara.jpg" /></div><div class="name">تارا</div></div>
        <div class="person" id="p-azad" style="left:56%;top:170px;"><div class="avatar"><img src="azad.png" /></div><div class="name">آزاد</div></div>
        <div class="person" id="p-rojin" style="left:69%;top:170px;"><div class="avatar"><img src="rojin.png" /></div><div class="name">روژین</div></div>
        <div class="person" id="p-khalid" style="left:82%;top:170px;"><div class="avatar"><img src="khalid.jpg" /></div><div class="name">خالد</div></div>

        <!-- Third Row -->
        <div class="person" id="p-viana" style="left:22%;top:340px;"><div class="avatar"><img src="viana.png" /></div><div class="name">ویانا</div></div>
        <div class="person" id="p-liana" style="left:36%;top:340px;"><div class="avatar"><img src="liana.jpg" /></div><div class="name">لیانا</div></div>
        <div class="person" id="p-nahal" style="left:62%;top:340px;"><div class="avatar"><img src="nahal.png" /></div><div class="name">نهال</div></div>
        <div class="person" id="p-shayan" style="left:78%;top:340px;"><div class="avatar"><img src="shayan.jpg" /></div><div class="name">شایان</div></div>
    </div>
</div>

<!-- Modal -->
<div id="modal">
    <div id="modal-card">
        <button class="modal-close">✕</button>

        <div class="modal-left">
            <img id="modal-img" />
        </div>

        <div class="modal-right">
            <h2 id="modal-name"></h2>
            <p id="modal-info"></p>

            <div class="modal-actions">
                <button class="btn primary" id="modal-action-1">جزئیات</button>
                <button class="btn" id="modal-action-2">بستن</button>
            </div>
        </div>
    </div>
</div>

<script>
/* اطلاعات کامل همه افراد */
const personData = {
  'p-roqye': { name: 'رقیه', info: '1956-04-30 | 1335-02-10 |' },
  'p-tahr': { name: 'طاهر', info: '1954-05-05 | 1333-02-15 |' },
  'p-elham': { name: 'الهام', info: '1992-12-12 | 1371-09-21 |' },
  'p-omid': { name: 'امید', info: '1993-02-16 | 1371-11-27 |' },
  'p-tara': { name: 'تارا', info: '1995-02-28 | 1373-12-09 |' },
  'p-azad': { name: 'آزاد', info: '1988-03-06 | 1366-12-16 |' },
  'p-rojin': { name: 'روژین', info: '1986-09-20 | 1365-06-29 |' },
  'p-khalid': { name: 'خالد', info: '1979-11-22 | 1358-09-01 |' },
  'p-viana': { name: 'ویانا', info: '2021-10-16 | 1400-07-24 |' },
  'p-liana': { name: 'لیانا', info: '2020-03-12 | 1398-12-22 |' },
  'p-nahal': { name: 'نهال', info: '2017-02-27 | 1395-12-09 |' },
  'p-shayan': { name: 'شایان', info: '2012-05-08 | 1391-02-19 |' }
};
/* Modal */
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modal-img');
const modalName = document.getElementById('modal-name');
const modalInfo = document.getElementById('modal-info');
const modalClose = document.querySelector('.modal-close');
const btnClose = document.getElementById('modal-action-2');

function openModal(id) {
    const data = personData[id];
    const card = document.getElementById(id);
    const img = card.querySelector('.avatar img');

    modalImg.src = img.src;
    modalName.textContent = data.name;
    modalInfo.textContent = data.info;

    modal.classList.add('show');
}

function closeModal() {
    modal.classList.remove('show');
}

document.querySelectorAll('.person').forEach(p => {
    p.onclick = () => openModal(p.id);
});

modalClose.onclick = closeModal;
btnClose.onclick = closeModal;

modal.onclick = e => { if (e.target === modal) closeModal(); };
window.onkeydown = e => { if (e.key === "Escape") closeModal(); };

/* SVG Marriage lines */
const tree = document.getElementById('tree');
const svg = document.getElementById('svg');

const marriages = [
    
    { parents: ['p-roqye','p-tahr'], children: ['p-elham','p-azad','p-rojin'] },

    
    { parents: ['p-omid','p-elham'], children: ['p-viana','p-liana'] },
     
    { parents: ['p-rojin','p-khalid'], children: ['p-nahal','p-shayan'] },
];


function rectInfo(el) {
    const r = el.getBoundingClientRect(), t = tree.getBoundingClientRect();
    const x = r.left - t.left, y = r.top - t.top;
    return {
        left: x, top: y, width: r.width, height: r.height,
        centerX: x + r.width / 2,
        centerY: y + r.height / 2,
        bottomY: y + r.height,
        topY: y
    };
}

function clearSVG() { while (svg.firstChild) svg.removeChild(svg.firstChild); }

function poly(pts) {
    const p = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
    p.setAttribute('points', pts.map(a => a.join(',')).join(' '));
    p.setAttribute('fill', 'none');
    p.setAttribute('stroke', '#000');
    p.setAttribute('stroke-width', '2');
    svg.appendChild(p);
}

function marriageNode(x, y) {
    const r = document.createElementNS('http://www.w3.org/2000/svg','rect');
    r.setAttribute('x', x - 10);
    r.setAttribute('y', y - 5);
    r.setAttribute('width', 20);
    r.setAttribute('height', 10);
    r.setAttribute('fill', '#fff');
    r.setAttribute('stroke', '#000');
    r.setAttribute('stroke-width', '1.5');
    svg.appendChild(r);
}

function draw() {
    clearSVG();
    const tr = tree.getBoundingClientRect();
    svg.setAttribute('width', tr.width);
    svg.setAttribute('height', tr.height);

    marriages.forEach(m => {
        const parents = m.parents.map(id => {
            const e = document.getElementById(id);
            return e ? { el: e, r: rectInfo(e) } : null;
        }).filter(Boolean);

        if (!parents.length) return;

        const mx = parents.reduce((s, p) => s + p.r.centerX, 0) / parents.length;
        const my = Math.max(...parents.map(p => p.r.bottomY)) + 12;

        marriageNode(mx, my);

        parents.forEach(p => {
            const sx = p.r.centerX, sy = p.r.bottomY - 4;
            poly([[sx, sy],[sx, my],[mx, my]]);
        });

        m.children.forEach(cid => {
            const c = document.getElementById(cid);
            if (!c) return;
            const r = rectInfo(c);
            const mid = Math.min(my + 24, r.topY - 8);
            poly([[mx, my + 4],[mx, mid],[r.centerX, mid],[r.centerX, r.topY - 2]]);
        });
    });
}

window.onload = draw;
window.onresize = () => requestAnimationFrame(draw);
window.onscroll  = () => requestAnimationFrame(draw);
</script>

</body>
</html>
